"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){angular.module("app",["ngAnimate","ngMaterial","ngMessages","ui.router"])}(),angular.module("app").run(["$templateCache",function(e){e.put("drCell/drCell.html",'<div class="cell" ng-class="c.returnCellClass()">\n\t<div class="cell__fig"></div>\n</div>\n'),e.put("drField/drField.html",'<ul class="cell-list">\n\t<li class="cell-list__item"\n\t\tng-repeat="(idx, cell) in cf.cells"\n\t\tng-style="{\'left\': cell.col*60 + \'px\', \'top\': cell.row*60 + \'px\'}"\n\t\tng-click="cf.cellCLick($event, cell, idx)">\n\n\t\t<dr-cell type="{{cell.type}}" state="{{cell.state}}"></dr-cell>\n\n\t</li>\n</ul>')}]),function(){function e(e,t,l,n,i){this.$scope=e,this.$http=t,this.$state=l,this.cellState="square",this.init()}angular.module("app").controller("mainCtrl",e),e.prototype.init=function(){},e.$inject=["$scope","$http","$state","$stateParams","$timeout"]}();var _createClass=function(){function e(e,t){for(var l=0;l<t.length;l++){var n=t[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,l,n){return l&&e(t.prototype,l),n&&e(t,n),t}}();!function(){angular.module("app").directive("drCell",["$templateCache",function(t){function l(e,t,l,n){}return{link:l,restrict:"AEC",scope:{},template:t.get("drCell/drCell.html"),controller:e,controllerAs:"c",bindToController:{type:"@?",state:"@?"}}}]);var e=function(){function e(t,l){_classCallCheck(this,e)}return _createClass(e,[{key:"returnCellClass",value:function(){var e="cell_type-"+(this.type||"square"),t="cell_state-"+(this.state||"default");return[e,t]}}]),e}();e.$inject=["$scope","$timeout"]}();var _createClass=function(){function e(e,t){for(var l=0;l<t.length;l++){var n=t[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,l,n){return l&&e(t.prototype,l),n&&e(t,n),t}}();!function(){angular.module("app").directive("drField",["$templateCache",function(t){function l(e,t,l,n){}return{link:l,restrict:"AEC",scope:{},template:t.get("drField/drField.html"),controller:e,controllerAs:"cf",bindToController:{cellClick:"=?",size:"=?",ctx:"=?"}}}]);var e=function(){function e(t,l,n){_classCallCheck(this,e),this.drFieldService=t,this.$scope=l,this.$timeout=n,this.init()}return _createClass(e,[{key:"init",value:function(){this.cells=this.drFieldService.createNewArr(this.size)}},{key:"cellCLick",value:function(e,t,l){var n=this;if(e.preventDefault(),e.stopPropagation(),"default"===t.state){for(var i=0;i<this.cells.length;i+=1)this.cells[i].state="default";this.activeCell=t,this.activeCell.state="active",this.activeCellIdx=l,this.drFieldService.markClosestCell(this.cells,this.size,l,"passive")}else"passive"===t.state?(this.drFieldService.replaceElements(this.cells,this.activeCellIdx,l),this.$timeout(function(){for(var e=0;e<n.cells.length;e+=1)n.cells[e].state="default"},200)):"active"===t.state&&(t.state="default",this.activeCell=void 0,this.activeCellIdx=void 0,this.drFieldService.markClosestCell(this.cells,this.size,l,"default"))}}]),e}();e.$inject=["drFieldService","$scope","$timeout"]}(),function(){angular.module("app").service("drFieldService",["drFiledFactory","$timeout",function(e,t){function l(e){var t=Math.floor(Math.random()*e.length);return e[t]}function n(t){for(var n=angular.copy(e.types),i=0;i<t.length;i+=1)for(var r=0;r<n.length;r+=1)t[i]===n[r]&&n.splice(r,1);return l(n)}function i(e,t){for(var l=0;l<e.length;l+=1)e[l].col=l%t,e[l].row=Math.floor(l/t)}function r(t,i){var r=l(e.types),s=[];a(t,r,s),c(t,i,r,s),s.length&&(r=n(s)),t.push({type:r,state:"default"})}function a(e,t,l){e[e.length-1]&&e[e.length-2]&&e[e.length-1].type===t&&e[e.length-2].type===t&&l.push(t)}function c(e,t,l,n){e[e.length-t]&&e[e.length-2*t]&&e[e.length-t].type===l&&e[e.length-2*t].type===l&&n.push(l)}this.createNewArr=function(e){for(var t=[],l=0;l<e*e;l++)r(t,e);return i(t,e),t},this.markClosestCell=function(e,t,l,n){e[l-t]&&(e[l-t].state=n),e[l+t]&&(e[l+t].state=n),e[l-1]&&(e[l-1].state=n),e[l+1]&&(e[l+1].state=n)},this.replaceElements=function(e,l,n){var i={col:e[l].col,row:e[l].row,type:e[l].type,state:e[l].state},r={col:e[n].col,row:e[n].row,type:e[n].type,state:e[n].state};e[l].col=r.col,e[l].row=r.row,e[n].col=i.col,e[n].row=i.row,t(function(){var t=angular.copy(e[l]);e[l]=e[n],e[n]=t},200)}}])}(),function(){angular.module("app").factory("drFiledFactory",function(){var e=["square","circle","triangle"],t=["default","active","passive","note"];return{types:e,states:t}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiYW5ndWxhciIsIm1vZHVsZSIsInJ1biIsIiR0ZW1wbGF0ZUNhY2hlIiwicHV0IiwibWFpbkN0cmwiLCIkc2NvcGUiLCIkaHR0cCIsIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsIiR0aW1lb3V0IiwidGhpcyIsImNlbGxTdGF0ZSIsImluaXQiLCJjb250cm9sbGVyIiwicHJvdG90eXBlIiwiJGluamVjdCIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJkaXJlY3RpdmUiLCJkckNlbGxMaW5rIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCJsaW5rIiwicmVzdHJpY3QiLCJzY29wZSIsInRlbXBsYXRlIiwiZ2V0IiwiZHJDZWxsQ3RybCIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJ0eXBlIiwic3RhdGUiLCJ2YWx1ZSIsImRyRmllbGRMaW5rIiwiZHJGaWVsZEN0cmwiLCJjZWxsQ2xpY2siLCJzaXplIiwiY3R4IiwiZHJGaWVsZFNlcnZpY2UiLCJjZWxscyIsImNyZWF0ZU5ld0FyciIsImUiLCJjZWxsIiwiaWR4IiwiX3RoaXMiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImFjdGl2ZUNlbGwiLCJhY3RpdmVDZWxsSWR4IiwibWFya0Nsb3Nlc3RDZWxsIiwicmVwbGFjZUVsZW1lbnRzIiwiX2kiLCJ1bmRlZmluZWQiLCJzZXJ2aWNlIiwiZHJGaWxlZEZhY3RvcnkiLCJyZXR1cm5SYW5kRWxlbWVudCIsImFyciIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInJldHVybkFub3RoZXJUeXBlIiwicmVwZWF0VHlwZXMiLCJuZXdBcnIiLCJjb3B5IiwidHlwZXMiLCJqIiwic3BsaWNlIiwic2V0Q29vcmRzVG9FbGVtZW50cyIsImNvbCIsInJvdyIsImNyZWF0ZUVsZW1lbnQiLCJjaGVja0hSZXAiLCJjaGVja1ZSZXAiLCJwdXNoIiwiaWR4MSIsImlkeDIiLCJlbGVtMSIsImVsZW0yIiwiY29weUVsIiwiZmFjdG9yeSIsInN0YXRlcyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFvQ0EsU0FBU0EsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBaURoSCxRQUFTSCxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxzQ0FuRmhILFdBQ0NDLFFBQVFDLE9BQU8sT0FBUSxZQUFhLGFBQWMsYUFBYyxpQkFJakVELFFBQVFDLE9BQU8sT0FBT0MsS0FBSyxpQkFBa0IsU0FBVUMsR0FDckRBLEVBQWVDLElBQUkscUJBQXNCLGdHQUN6Q0QsRUFBZUMsSUFBSSx1QkFBd0IsK1RBSTdDLFdBS0MsUUFBU0MsR0FBU0MsRUFBUUMsRUFBT0MsRUFBUUMsRUFBY0MsR0FDdERDLEtBQUtMLE9BQVNBLEVBQ2RLLEtBQUtKLE1BQVFBLEVBQ2JJLEtBQUtILE9BQVNBLEVBRWRHLEtBQUtDLFVBQVksU0FFakJELEtBQUtFLE9BVE5iLFFBQVFDLE9BQU8sT0FBT2EsV0FBVyxXQUFZVCxHQVk3Q0EsRUFBU1UsVUFBVUYsS0FBTyxhQUUxQlIsRUFBU1csU0FBVyxTQUFVLFFBQVMsU0FBVSxlQUFnQixjQUlsRSxJQUFJQyxjQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdF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YSxFQUFJYixFQUFNLEdBQUdaLE1BQVFBLElBUXhDbEMsS0FBS3FELGdCQUFrQixTQUFVTSxFQUFLa0IsRUFBTUMsR0FDM0MsR0FBSUMsSUFBVVIsSUFBS1osRUFBSWtCLEdBQU1OLElBQUtDLElBQUtiLEVBQUlrQixHQUFNTCxJQUFLdkMsS0FBTTBCLEVBQUlrQixHQUFNNUMsS0FBTUMsTUFBT3lCLEVBQUlrQixHQUFNM0MsT0FDekY4QyxHQUFVVCxJQUFLWixFQUFJbUIsR0FBTVAsSUFBS0MsSUFBS2IsRUFBSW1CLEdBQU1OLElBQUt2QyxLQUFNMEIsRUFBSW1CLEdBQU03QyxLQUFNQyxNQUFPeUIsRUFBSW1CLEdBQU01QyxNQUU3RnlCLEdBQUlrQixHQUFNTixJQUFNUyxFQUFNVCxJQUN0QlosRUFBSWtCLEdBQU1MLElBQU1RLEVBQU1SLElBRXRCYixFQUFJbUIsR0FBTVAsSUFBTVEsRUFBTVIsSUFDdEJaLEVBQUltQixHQUFNTixJQUFNTyxFQUFNUCxJQUt0QnpFLEVBQVMsV0FDUixHQUFJa0YsR0FBUzVGLFFBQVE2RSxLQUFLUCxFQUFJa0IsR0FDOUJsQixHQUFJa0IsR0FBUWxCLEVBQUltQixHQUNoQm5CLEVBQUltQixHQUFRRyxHQUNWLFlBTU4sV0FDQzVGLFFBQVFDLE9BQU8sT0FBTzRGLFFBQVEsaUJBQWtCLFdBQy9DLEdBQUlmLElBQVMsU0FBVSxTQUFVLFlBRTdCZ0IsR0FBVSxVQUFXLFNBQVUsVUFBVyxPQUU5QyxRQUNDaEIsTUFBT0EsRUFDUGdCLE9BQVFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnbmdBbmltYXRlJywgJ25nTWF0ZXJpYWwnLCAnbmdNZXNzYWdlcycsICd1aS5yb3V0ZXInXSk7XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnYXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdkckNlbGwvZHJDZWxsLmh0bWwnLCAnPGRpdiBjbGFzcz1cImNlbGxcIiBuZy1jbGFzcz1cImMucmV0dXJuQ2VsbENsYXNzKClcIj5cXG5cXHQ8ZGl2IGNsYXNzPVwiY2VsbF9fZmlnXCI+PC9kaXY+XFxuPC9kaXY+XFxuJyk7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnZHJGaWVsZC9kckZpZWxkLmh0bWwnLCAnPHVsIGNsYXNzPVwiY2VsbC1saXN0XCI+XFxuXFx0PGxpIGNsYXNzPVwiY2VsbC1saXN0X19pdGVtXCJcXG5cXHRcXHRuZy1yZXBlYXQ9XCIoaWR4LCBjZWxsKSBpbiBjZi5jZWxsc1wiXFxuXFx0XFx0bmctc3R5bGU9XCJ7XFwnbGVmdFxcJzogY2VsbC5jb2wqNjAgKyBcXCdweFxcJywgXFwndG9wXFwnOiBjZWxsLnJvdyo2MCArIFxcJ3B4XFwnfVwiXFxuXFx0XFx0bmctY2xpY2s9XCJjZi5jZWxsQ0xpY2soJGV2ZW50LCBjZWxsLCBpZHgpXCI+XFxuXFxuXFx0XFx0PGRyLWNlbGwgdHlwZT1cInt7Y2VsbC50eXBlfX1cIiBzdGF0ZT1cInt7Y2VsbC5zdGF0ZX19XCI+PC9kci1jZWxsPlxcblxcblxcdDwvbGk+XFxuPC91bD4nKTtcbn1dKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdtYWluQ3RybCcsIG1haW5DdHJsKTtcblxuXHRmdW5jdGlvbiBtYWluQ3RybCgkc2NvcGUsICRodHRwLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHRpbWVvdXQpIHtcblx0XHR0aGlzLiRzY29wZSA9ICRzY29wZTtcblx0XHR0aGlzLiRodHRwID0gJGh0dHA7XG5cdFx0dGhpcy4kc3RhdGUgPSAkc3RhdGU7XG5cblx0XHR0aGlzLmNlbGxTdGF0ZSA9ICdzcXVhcmUnO1xuXG5cdFx0dGhpcy5pbml0KCk7XG5cdH1cblxuXHRtYWluQ3RybC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5cdG1haW5DdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckaHR0cCcsICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJyR0aW1lb3V0J107XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4oZnVuY3Rpb24gKCkge1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuZGlyZWN0aXZlKCdkckNlbGwnLCBbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24gKCR0ZW1wbGF0ZUNhY2hlKSB7XG5cdFx0ZnVuY3Rpb24gZHJDZWxsTGluaygkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICR0aW1lb3V0KSB7fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbms6IGRyQ2VsbExpbmssXG5cdFx0XHRyZXN0cmljdDogJ0FFQycsXG5cdFx0XHRzY29wZToge30sXG5cdFx0XHR0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdkckNlbGwvZHJDZWxsLmh0bWwnKSxcblx0XHRcdGNvbnRyb2xsZXI6IGRyQ2VsbEN0cmwsXG5cdFx0XHRjb250cm9sbGVyQXM6ICdjJyxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0XHRcdFx0dHlwZTogJ0A/Jyxcblx0XHRcdFx0c3RhdGU6ICdAPydcblx0XHRcdH1cblx0XHR9O1xuXHR9XSk7XG5cblx0dmFyIGRyQ2VsbEN0cmwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0ZnVuY3Rpb24gZHJDZWxsQ3RybCgkc2NvcGUsICR0aW1lb3V0KSB7XG5cdFx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgZHJDZWxsQ3RybCk7XG5cdFx0fVxuXG5cdFx0LyoqXG4gICAqINCY0YHQv9C+0LvRjNC30YPQtdC8INC90LAg0LLRjNGO0YXQtSwg0LLQvtC30LLRgNCw0YnQsNC10YIgY3NzLdC60LvQsNGB0YHRiyDQtNC70Y8g0YLQuNC/0LAg0Lgg0YHQvtGB0YLQvtGP0L3QuNGPINGP0YfQtdC50LrQuFxuICAgKi9cblxuXG5cdFx0X2NyZWF0ZUNsYXNzKGRyQ2VsbEN0cmwsIFt7XG5cdFx0XHRrZXk6ICdyZXR1cm5DZWxsQ2xhc3MnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIHJldHVybkNlbGxDbGFzcygpIHtcblx0XHRcdFx0dmFyIHR5cGUgPSAnY2VsbF90eXBlLScgKyAodGhpcy50eXBlIHx8ICdzcXVhcmUnKTtcblx0XHRcdFx0dmFyIHN0YXRlID0gJ2NlbGxfc3RhdGUtJyArICh0aGlzLnN0YXRlIHx8ICdkZWZhdWx0Jyk7XG5cblx0XHRcdFx0cmV0dXJuIFt0eXBlLCBzdGF0ZV07XG5cdFx0XHR9XG5cdFx0fV0pO1xuXG5cdFx0cmV0dXJuIGRyQ2VsbEN0cmw7XG5cdH0oKTtcblxuXHRkckNlbGxDdHJsLiRpbmplY3QgPSBbJyRzY29wZScsICckdGltZW91dCddO1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuKGZ1bmN0aW9uICgpIHtcblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpLmRpcmVjdGl2ZSgnZHJGaWVsZCcsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcblx0XHRmdW5jdGlvbiBkckZpZWxkTGluaygkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICR0aW1lb3V0KSB7fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbms6IGRyRmllbGRMaW5rLFxuXHRcdFx0cmVzdHJpY3Q6ICdBRUMnLFxuXHRcdFx0c2NvcGU6IHt9LFxuXHRcdFx0dGVtcGxhdGU6ICR0ZW1wbGF0ZUNhY2hlLmdldCgnZHJGaWVsZC9kckZpZWxkLmh0bWwnKSxcblx0XHRcdGNvbnRyb2xsZXI6IGRyRmllbGRDdHJsLFxuXHRcdFx0Y29udHJvbGxlckFzOiAnY2YnLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjoge1xuXHRcdFx0XHRjZWxsQ2xpY2s6ICc9PycsXG5cdFx0XHRcdHNpemU6ICc9PycsXG5cdFx0XHRcdGN0eDogJz0/J1xuXHRcdFx0fVxuXHRcdH07XG5cdH1dKTtcblxuXHR2YXIgZHJGaWVsZEN0cmwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0ZnVuY3Rpb24gZHJGaWVsZEN0cmwoZHJGaWVsZFNlcnZpY2UsICRzY29wZSwgJHRpbWVvdXQpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBkckZpZWxkQ3RybCk7XG5cblx0XHRcdHRoaXMuZHJGaWVsZFNlcnZpY2UgPSBkckZpZWxkU2VydmljZTtcblx0XHRcdHRoaXMuJHNjb3BlID0gJHNjb3BlO1xuXHRcdFx0dGhpcy4kdGltZW91dCA9ICR0aW1lb3V0O1xuXG5cdFx0XHR0aGlzLmluaXQoKTtcblx0XHR9XG5cblx0XHQvKipcbiAgICog0J/RgNC4INC40L3RhtC40LDQu9C40LfQsNGG0LjQuCDRgdC+0LfQtNCw0LXQvCDQvNCw0YHRgdC40LJcbiAgICovXG5cblxuXHRcdF9jcmVhdGVDbGFzcyhkckZpZWxkQ3RybCwgW3tcblx0XHRcdGtleTogJ2luaXQnLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0XHRcdHRoaXMuY2VsbHMgPSB0aGlzLmRyRmllbGRTZXJ2aWNlLmNyZWF0ZU5ld0Fycih0aGlzLnNpemUpO1xuXHRcdFx0fVxuXG5cdFx0XHQvKipcbiAgICAqINCa0LvQuNC6INC/0L4g0Y/Rh9C10LnQutC1XG4gICAgKiA9PSDRgdC+0LHRi9GC0LjQtSwg0Y/Rh9C10LnQutCwLCDQuNC90LTQtdC60YEg0LIg0LzQsNGB0YHQuNCy0LUgPT1cbiAgICAqL1xuXG5cdFx0fSwge1xuXHRcdFx0a2V5OiAnY2VsbENMaWNrJyxcblx0XHRcdHZhbHVlOiBmdW5jdGlvbiBjZWxsQ0xpY2soZSwgY2VsbCwgaWR4KSB7XG5cdFx0XHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0XHRcdGlmIChjZWxsLnN0YXRlID09PSAnZGVmYXVsdCcpIHtcblx0XHRcdFx0XHQvLyDQmtC70LjQuiDQv9C+INGP0YfQtdC50LrQtSDRgSDQtNC10YTQvtC70YLQvdGL0Lwg0YHRgtCw0YLRg9GB0L7QvC4g0JTQtdC70LDQtdC8INC10ZEg0LDQutGC0LjQstC90L7QuSDQuCDQstGL0LTQtdC70Y/QtdC8INC/0LDRgdGB0LjQstC+0Lwg0LHQu9C40LbQsNC50YjQuNC1INGP0YfQtdC50LrQuFxuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jZWxscy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRcdFx0dGhpcy5jZWxsc1tpXS5zdGF0ZSA9ICdkZWZhdWx0Jztcblx0XHRcdFx0XHR9dGhpcy5hY3RpdmVDZWxsID0gY2VsbDtcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZUNlbGwuc3RhdGUgPSAnYWN0aXZlJztcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZUNlbGxJZHggPSBpZHg7XG5cdFx0XHRcdFx0dGhpcy5kckZpZWxkU2VydmljZS5tYXJrQ2xvc2VzdENlbGwodGhpcy5jZWxscywgdGhpcy5zaXplLCBpZHgsICdwYXNzaXZlJyk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2VsbC5zdGF0ZSA9PT0gJ3Bhc3NpdmUnKSB7XG5cdFx0XHRcdFx0Ly8g0JrQu9C40Log0L/QviDRj9GH0LXQudC60LUg0YEg0L/QsNGB0YHQuNCy0L3Ri9C8INGB0YLQsNGC0YPRgdC+0Lxcblx0XHRcdFx0XHR0aGlzLmRyRmllbGRTZXJ2aWNlLnJlcGxhY2VFbGVtZW50cyh0aGlzLmNlbGxzLCB0aGlzLmFjdGl2ZUNlbGxJZHgsIGlkeCk7XG5cdFx0XHRcdFx0dGhpcy4kdGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBfaSA9IDA7IF9pIDwgX3RoaXMuY2VsbHMubGVuZ3RoOyBfaSArPSAxKSB7XG5cdFx0XHRcdFx0XHRcdF90aGlzLmNlbGxzW19pXS5zdGF0ZSA9ICdkZWZhdWx0Jztcblx0XHRcdFx0XHRcdH0gLy8gdGhpcy5hY3RpdmVDZWxsID0gY2VsbDtcblx0XHRcdFx0XHRcdC8vIHRoaXMuYWN0aXZlQ2VsbC5zdGF0ZSA9ICdhY3RpdmUnO1xuXHRcdFx0XHRcdFx0Ly8gdGhpcy5hY3RpdmVDZWxsSWR4ID0gaWR4O1xuXHRcdFx0XHRcdFx0Ly8gdGhpcy5kckZpZWxkU2VydmljZS5tYXJrQ2xvc2VzdENlbGwodGhpcy5jZWxscywgdGhpcy5zaXplLCBpZHgsICdwYXNzaXZlJyk7XG5cdFx0XHRcdFx0fSwgMjAwKTtcblx0XHRcdFx0fSBlbHNlIGlmIChjZWxsLnN0YXRlID09PSAnYWN0aXZlJykge1xuXHRcdFx0XHRcdC8vINCa0LvQuNC6INC/0L4g0Y/Rh9C10LnQutC1INGBINCw0LrRgtC40LLQvdGL0Lwg0YHRgtCw0YLRg9GB0L7QvC4g0KHQvdC40LzQsNC10Lwg0LDQutGC0LjQstC90L7RgdGC0Ywg0YEg0L3QtdGRINC4INCx0LvQuNC20LDQudGI0LjRhVxuXHRcdFx0XHRcdGNlbGwuc3RhdGUgPSAnZGVmYXVsdCc7XG5cdFx0XHRcdFx0dGhpcy5hY3RpdmVDZWxsID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdHRoaXMuYWN0aXZlQ2VsbElkeCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHR0aGlzLmRyRmllbGRTZXJ2aWNlLm1hcmtDbG9zZXN0Q2VsbCh0aGlzLmNlbGxzLCB0aGlzLnNpemUsIGlkeCwgJ2RlZmF1bHQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1dKTtcblxuXHRcdHJldHVybiBkckZpZWxkQ3RybDtcblx0fSgpO1xuXG5cdGRyRmllbGRDdHJsLiRpbmplY3QgPSBbJ2RyRmllbGRTZXJ2aWNlJywgJyRzY29wZScsICckdGltZW91dCddO1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpLnNlcnZpY2UoJ2RyRmllbGRTZXJ2aWNlJywgWydkckZpbGVkRmFjdG9yeScsICckdGltZW91dCcsIGZ1bmN0aW9uIChkckZpbGVkRmFjdG9yeSwgJHRpbWVvdXQpIHtcblx0XHQvKipcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBwcml2YXRlIG1ldGhvZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICovXG5cdFx0LyoqXG4gICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdC8INGA0LDQvdC00L7QvNC90YvQuSDRjdC70LXQvNC10L3RgiDQvNCw0YHRgdC40LLQsFxuICAgKi9cblx0XHRmdW5jdGlvbiByZXR1cm5SYW5kRWxlbWVudChhcnIpIHtcblx0XHRcdHZhciBpZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnIubGVuZ3RoKTtcblx0XHRcdHJldHVybiBhcnJbaWR4XTtcblx0XHR9XG5cblx0XHQvKipcbiAgICog0JLQvtC30LLRgNCw0YnQsNC10Lwg0YDQsNC90LTQvtC80L3Ri9C5INGN0LvQtdC80LXQvdGCINC80LDRgdGB0LjQstCwLCDQuNGB0LrQu9GO0YfQsNGPINC/0LXRgNC10LTQsNC90L3Ri9C5INCyINGE0YPQvdC60YbQuNGOXG4gICAqL1xuXHRcdGZ1bmN0aW9uIHJldHVybkFub3RoZXJUeXBlKHJlcGVhdFR5cGVzKSB7XG5cdFx0XHR2YXIgbmV3QXJyID0gYW5ndWxhci5jb3B5KGRyRmlsZWRGYWN0b3J5LnR5cGVzKTtcblxuXHRcdFx0bmV4dDogZm9yICh2YXIgaSA9IDA7IGkgPCByZXBlYXRUeXBlcy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IG5ld0Fyci5sZW5ndGg7IGogKz0gMSkge1xuXHRcdFx0XHRcdGlmIChyZXBlYXRUeXBlc1tpXSA9PT0gbmV3QXJyW2pdKSBuZXdBcnIuc3BsaWNlKGosIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXR1cm5SYW5kRWxlbWVudChuZXdBcnIpO1xuXHRcdH1cblxuXHRcdC8qKlxuICAgKiDQpNGD0L3QutGG0LjRjyDQv9GA0L7RgdGC0LDQstC70Y/QtdGCINGN0LvQtdC80LXQvdGC0YvQvCDQvNCw0YHRgdC40LLQsCDQutC+0L7RgNC00LjQvdCw0YLRiyAo0L/QvtC70Y8gXCJjb2xcIiwgXCJyb3dcIikg0LIg0LfQsNCy0LjRgdC40LzQvtGB0YLQuCDQvtGCXG4gICAqINCy0YLQvtGA0L7Qs9C+INC/0LDRgNCw0LzQtdGC0YDQsCBzaXplICjRiNC40YDQuNC90LAg0LzQsNGB0YHQuNCy0LApXG4gICAqL1xuXHRcdGZ1bmN0aW9uIHNldENvb3Jkc1RvRWxlbWVudHMoYXJyLCBzaXplKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRhcnJbaV0uY29sID0gaSAlIHNpemU7XG5cdFx0XHRcdGFycltpXS5yb3cgPSBNYXRoLmZsb29yKGkgLyBzaXplKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvKipcbiAgICog0KTRg9C90LrRhtC40Y8g0L/RgNC40L3QuNC80LDQtdGCINC80LDRgdGB0LjQsiwg0LIg0LrQvtGC0L7RgNGL0Lkg0LTQvtCx0LDQstC70Y/QtdGCINC90L7QstGL0Lkg0Y3Qu9C10LzQtdC90YIuXG4gICAqINCf0YDQuCDQtNC+0LHQsNCy0LvQtdC90LjQuCDQstGL0L/QvtC70L3Rj9C10YIg0LTQstC1INC/0YDQvtCy0LXRgNC60Lg6XG4gICAqIC0g0LXRgdC70Lgg0YLQuNC/0Ysg0LTQstGD0YUg0L/RgNC10LTRi9C00YPRidC40YUg0L7QsdGK0LXQutGCINGA0LDQstC90Ysg0YLQtdC60YPRidC10LzRgyDRgdCz0LXQvdC10YDQuNGA0L7QstCw0L3QvdC+0LzRgyDRgtC40L/Rgywg0YLQviDQs9C10L3QtdGA0LjRgNGD0LXQvCDQvdC+0LLRi9C5XG4gICAqIC0g0LXRgdC70Lgg0YLQuNC/0Ysg0LTQstGD0YUg0L7QsdGK0LXQutGC0L7QsiDQvdCw0LQg0YLQtdC60YPQt9C40Lwg0YDQsNCy0L3RiyDRgtC10LrRg9GJ0LXQvNGDINGB0LPQtdC90LXRgNC40YDQvtCy0LDQvdC90L7QvNGDINGC0LjQv9GDLCDRgtC+INCz0LXQvdC10YDQuNGA0YPQtdC8INC90L7QstGL0LlcbiAgICogQHBhcmFtIGFyclxuICAgKi9cblx0XHRmdW5jdGlvbiBjcmVhdGVFbGVtZW50KGFyciwgc2l6ZSkge1xuXHRcdFx0dmFyIHR5cGUgPSByZXR1cm5SYW5kRWxlbWVudChkckZpbGVkRmFjdG9yeS50eXBlcyk7XG5cblx0XHRcdHZhciByZXBlYXRUeXBlcyA9IFtdO1xuXG5cdFx0XHQvLyDQn9GA0L7QstC10YDQutC4INC90LAg0LPQvtGA0LjQt9C+0L3RgtCw0LvRjNC90YvQtSDQuCDQstC10YDRgtC40LrQsNC70YzQvdGL0LUg0YHQvtCy0L/QsNC00LXQvdC40Y8g0L/RgNC4INCz0LXQvdC10YDQsNGG0LjQuFxuXHRcdFx0Y2hlY2tIUmVwKGFyciwgdHlwZSwgcmVwZWF0VHlwZXMpO1xuXHRcdFx0Y2hlY2tWUmVwKGFyciwgc2l6ZSwgdHlwZSwgcmVwZWF0VHlwZXMpO1xuXG5cdFx0XHRpZiAocmVwZWF0VHlwZXMubGVuZ3RoKSB0eXBlID0gcmV0dXJuQW5vdGhlclR5cGUocmVwZWF0VHlwZXMpO1xuXG5cdFx0XHRhcnIucHVzaCh7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdHN0YXRlOiAnZGVmYXVsdCdcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8qKlxuICAgKiDQn9GA0L7QstC10YDQutCwINC90LAg0LPQvtGA0LjQt9C+0L3RgtCw0LvRjNC90L7QtSDQv9C+0LLRgtC+0YDQtdC90LjQtVxuICAgKi9cblx0XHRmdW5jdGlvbiBjaGVja0hSZXAoYXJyLCB0eXBlLCByZXBlYXRUeXBlcykge1xuXHRcdFx0aWYgKGFyclthcnIubGVuZ3RoIC0gMV0gJiYgYXJyW2Fyci5sZW5ndGggLSAyXSAmJiBhcnJbYXJyLmxlbmd0aCAtIDFdLnR5cGUgPT09IHR5cGUgJiYgYXJyW2Fyci5sZW5ndGggLSAyXS50eXBlID09PSB0eXBlKSB7XG5cdFx0XHRcdHJlcGVhdFR5cGVzLnB1c2godHlwZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG4gICAqINCf0YDQvtCy0LXRgNC60LAg0L3QsCDQstC10YDRgtC40LrQsNC70YzQvdC+0LUg0L/QvtCy0YLQvtGA0LXQvdC40LVcbiAgICovXG5cdFx0ZnVuY3Rpb24gY2hlY2tWUmVwKGFyciwgc2l6ZSwgdHlwZSwgcmVwZWF0VHlwZXMpIHtcblx0XHRcdGlmIChhcnJbYXJyLmxlbmd0aCAtIHNpemVdICYmIGFyclthcnIubGVuZ3RoIC0gc2l6ZSAqIDJdICYmIGFyclthcnIubGVuZ3RoIC0gc2l6ZV0udHlwZSA9PT0gdHlwZSAmJiBhcnJbYXJyLmxlbmd0aCAtIHNpemUgKiAyXS50eXBlID09PSB0eXBlKSB7XG5cdFx0XHRcdHJlcGVhdFR5cGVzLnB1c2godHlwZSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG4gICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gcHVibGljIG1ldGhvZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICovXG5cblx0XHQvKipcbiAgICog0JzQtdGC0L7QtCDRgdC10YDQstC40YHQsCDQstC+0LfQstGA0LDRidCw0LXRgiDQvdC+0LLRi9C5INC80LDRgdGB0LjQsiDQtNC70LjQvdC+0Lkgc2l6ZSpzaXplXG4gICAqL1xuXHRcdHRoaXMuY3JlYXRlTmV3QXJyID0gZnVuY3Rpb24gKHNpemUpIHtcblx0XHRcdHZhciBhcnIgPSBbXTtcblxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzaXplICogc2l6ZTsgaSsrKSB7XG5cdFx0XHRcdGNyZWF0ZUVsZW1lbnQoYXJyLCBzaXplKTtcblx0XHRcdH1zZXRDb29yZHNUb0VsZW1lbnRzKGFyciwgc2l6ZSk7XG5cblx0XHRcdHJldHVybiBhcnI7XG5cdFx0fTtcblxuXHRcdC8qKlxuICAgKiDQl9Cw0LTQsNC10Lwg0YHQvtGB0YLQvtGP0L3QuNC1INCx0LvQuNC20LDQudGI0LjQvCDRjdC70LXQvNC10L3RgtCw0Lwg0L7RgiDQstGL0LTQtdC70LXQvdC90L7Qs9C+XG4gICAqL1xuXHRcdHRoaXMubWFya0Nsb3Nlc3RDZWxsID0gZnVuY3Rpb24gKGFyciwgc2l6ZSwgaWR4LCBzdGF0ZSkge1xuXHRcdFx0aWYgKGFycltpZHggLSBzaXplXSkgYXJyW2lkeCAtIHNpemVdLnN0YXRlID0gc3RhdGU7XG5cdFx0XHRpZiAoYXJyW2lkeCArIHNpemVdKSBhcnJbaWR4ICsgc2l6ZV0uc3RhdGUgPSBzdGF0ZTtcblx0XHRcdGlmIChhcnJbaWR4IC0gMV0pIGFycltpZHggLSAxXS5zdGF0ZSA9IHN0YXRlO1xuXHRcdFx0aWYgKGFycltpZHggKyAxXSkgYXJyW2lkeCArIDFdLnN0YXRlID0gc3RhdGU7XG5cdFx0fTtcblxuXHRcdC8qKlxuICAgKiDQnNC10L3Rj9C10Lwg0LzQtdGB0YLQsNC80Lgg0Y/Rh9C10LnQutC4LiDQkNC70LPQvtGA0LjRgtC8OlxuICAgKiAtINGB0L3QsNGH0LDQu9CwINC80LXQvdGP0LXQvCDQv9Cw0YDQsNC80LXQvdGC0YDRiyBjb2wvcm93ICjQtNC70Y8g0LDQvdC40LzQsNGG0LgpLlxuICAgKiAtINC/0L7RgdC70LUg0L/QviDRgtCw0LnQvNCw0YPRgtGDINC80LXQvdGP0LXQvCDQtNCw0L3QvdGL0LUg0L7QsdGK0LXQutGC0L7QsiDQsiDRgdCw0LzQvtC8INC80LDRgdGB0LjQstC1ICjRhNC40LPRg9GA0YMpXG4gICAqL1xuXHRcdHRoaXMucmVwbGFjZUVsZW1lbnRzID0gZnVuY3Rpb24gKGFyciwgaWR4MSwgaWR4Mikge1xuXHRcdFx0dmFyIGVsZW0xID0geyBjb2w6IGFycltpZHgxXS5jb2wsIHJvdzogYXJyW2lkeDFdLnJvdywgdHlwZTogYXJyW2lkeDFdLnR5cGUsIHN0YXRlOiBhcnJbaWR4MV0uc3RhdGUgfTtcblx0XHRcdHZhciBlbGVtMiA9IHsgY29sOiBhcnJbaWR4Ml0uY29sLCByb3c6IGFycltpZHgyXS5yb3csIHR5cGU6IGFycltpZHgyXS50eXBlLCBzdGF0ZTogYXJyW2lkeDJdLnN0YXRlIH07XG5cblx0XHRcdGFycltpZHgxXS5jb2wgPSBlbGVtMi5jb2w7XG5cdFx0XHRhcnJbaWR4MV0ucm93ID0gZWxlbTIucm93O1xuXG5cdFx0XHRhcnJbaWR4Ml0uY29sID0gZWxlbTEuY29sO1xuXHRcdFx0YXJyW2lkeDJdLnJvdyA9IGVsZW0xLnJvdztcblxuXHRcdFx0LyoqXG4gICAgKiDQktGA0LXQvNGPINGC0LDQudC80LDRg9GC0LAgLSDQstGA0LXQvNGPINCw0L3QuNC80LDRhtC40Lgg0LTQstC40LbQtdC90LjRjyDRjdC70LXQvNC10L3RgtC+0LIg0LLQviDQstGA0LXQvNGPINGB0LzQtdC90Ysg0L/QvtC30LjRhtC40LlcbiAgICAqL1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgY29weUVsID0gYW5ndWxhci5jb3B5KGFycltpZHgxXSk7XG5cdFx0XHRcdGFycltpZHgxXSA9IGFycltpZHgyXTtcblx0XHRcdFx0YXJyW2lkeDJdID0gY29weUVsO1xuXHRcdFx0fSwgMjAwKTtcblx0XHR9O1xuXHR9XSk7XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnZHJGaWxlZEZhY3RvcnknLCBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHR5cGVzID0gWydzcXVhcmUnLCAnY2lyY2xlJywgJ3RyaWFuZ2xlJ107XG5cblx0XHR2YXIgc3RhdGVzID0gWydkZWZhdWx0JywgJ2FjdGl2ZScsICdwYXNzaXZlJywgJ25vdGUnXTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHR0eXBlczogdHlwZXMsXG5cdFx0XHRzdGF0ZXM6IHN0YXRlc1xuXHRcdH07XG5cdH0pO1xufSkoKTsiXX0=
