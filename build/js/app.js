"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){angular.module("app",["ngAnimate","ngMaterial","ngMessages","ui.router"])}(),angular.module("app").run(["$templateCache",function(e){e.put("drCell/drCell.html",'<div class="cell" ng-class="c.returnCellClass()">\n\t<div class="cell__fig"></div>\n</div>\n'),e.put("drField/drField.html",'<ul class="cell-list">\n\t<li class="cell-list__item"\n\t\tng-repeat="(idx, cell) in cf.cells track by cell.id"\n\t\tng-style="{\'left\': cell.col*60 + \'px\', \'top\': cell.row*60 + \'px\'}"\n\t\tng-click="cf.cellCLick($event, cell, idx)">\n\n\t\t<dr-cell type="{{cell.type}}" state="{{cell.state}}"></dr-cell>\n\n\t</li>\n</ul>')}]),function(){function e(e,t,l,r,n){this.$scope=e,this.$http=t,this.$state=l,this.cellState="square",this.init()}angular.module("app").controller("mainCtrl",e),e.prototype.init=function(){},e.$inject=["$scope","$http","$state","$stateParams","$timeout"]}();var _createClass=function(){function e(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,l,r){return l&&e(t.prototype,l),r&&e(t,r),t}}();!function(){angular.module("app").directive("drCell",["$templateCache",function(t){function l(e,t,l,r){}return{link:l,restrict:"AEC",scope:{},template:t.get("drCell/drCell.html"),controller:e,controllerAs:"c",bindToController:{type:"@?",state:"@?"}}}]);var e=function(){function e(t,l){_classCallCheck(this,e)}return _createClass(e,[{key:"returnCellClass",value:function(){var e="cell_type-"+(this.type||"square"),t="cell_state-"+(this.state||"default");return[e,t]}}]),e}();e.$inject=["$scope","$timeout"]}();var _createClass=function(){function e(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,l,r){return l&&e(t.prototype,l),r&&e(t,r),t}}();!function(){angular.module("app").directive("drField",["$templateCache",function(t){function l(e,t,l,r){}return{link:l,restrict:"AEC",scope:{},template:t.get("drField/drField.html"),controller:e,controllerAs:"cf",bindToController:{cellClick:"=?",size:"=?",ctx:"=?"}}}]);var e=function(){function e(t,l,r){_classCallCheck(this,e),this.drFieldService=t,this.size&&(this.drFieldService.size=this.size),this.$scope=l,this.$timeout=r,this.init()}return _createClass(e,[{key:"init",value:function(){this.cells=this.drFieldService.createNewArr(this.size)}},{key:"cellCLick",value:function(e,t,l){if(e.preventDefault(),e.stopPropagation(),"default"===t.state){for(var r=0;r<this.cells.length;r+=1)this.cells[r].state="default";this.activeCell=t,this.activeCell.state="active",this.activeCellIdx=l,this.drFieldService.markClosestCell(this.cells,this.size,l,"passive")}else"passive"===t.state?(this.drFieldService.replaceElements(this.cells,this.activeCellIdx,l),this.$timeout(function(){},200)):"active"===t.state&&(t.state="default",this.activeCell=void 0,this.activeCellIdx=void 0,this.drFieldService.markClosestCell(this.cells,this.size,l,"default"))}}]),e}();e.$inject=["drFieldService","$scope","$timeout"]}(),function(){angular.module("app").service("drFieldService",["drFiledFactory","$timeout",function(e,t){function l(e){var t=Math.floor(Math.random()*e.length);return e[t]}function r(t){for(var r=angular.copy(e.types),n=0;n<t.length;n+=1)for(var i=0;i<r.length;i+=1)t[n]===r[i]&&r.splice(i,1);return l(r)}function n(e,t){for(var l=0;l<e.length;l+=1)e[l].col=l%t,e[l].row=Math.floor(l/t)}function i(t,n,i){var s=l(e.types),o=[];a(t,n,o),c(t,n,o),o.length&&(s=r(o)),t.push({id:i,type:s,state:"default"})}function a(e,t,l){var r=e.length%t;r>1&&e[e.length-2].type===e[e.length-1].type&&l.push(e[e.length-1].type)}function c(e,t,l){var r=Math.floor(e.length/t);r>1&&e[e.length-t].type===e[e.length-2*t].type&&l.push(e[e.length-t].type)}function s(e,t,l){for(var r=0;r<e.length;r+=1){for(var n=r%l,i=1,a=e[r].type,c=1;c<l-n&&e[r+c].type===a;c+=1)i++;if(i>2){for(var s=[],o=0;o<i;o+=1)s.push(r+o);t.push({length:i,type:a,idxArr:s}),r+=i-1,i=0}else i=0}}function o(e,t,l){for(var r=0,n=0;n<e.length;n+=1){n>0&&n%l===0&&r++;for(var i=n%l*l+r,a=1,c=e[i].type,s=1;s<l-i/l&&e[i+l*s].type===c;s+=1)a++;if(a>2){for(var o=[],u=0;u<a;u+=1)o.push(i+l*u);t.push({length:a,type:c,idxArr:o}),n+=a-1,a=0}else a=0}}this.createNewArr=function(e){for(var t=[],l=0;l<e*e;l++)i(t,e,l);return n(t,e),t},this.markClosestCell=function(e,t,l,r){e[l-t]&&(e[l-t].state=r),e[l+t]&&(e[l+t].state=r),e[l-1]&&(e[l-1].state=r),e[l+1]&&(e[l+1].state=r)},this.replaceElements=function(e,l,r){var n=this,i={col:e[l].col,row:e[l].row,type:e[l].type,state:e[l].state},a={col:e[r].col,row:e[r].row,type:e[r].type,state:e[r].state};e[l].col=a.col,e[l].row=a.row,e[r].col=i.col,e[r].row=i.row,t(function(){var t=angular.copy(e[l]);e[l]=e[r],e[r]=t;var i=n.checkRowElements(e);n.deleteElements(e,i)},200)},this.checkRowElements=function(t){var l=[],r=e.size;return s(t,l,r),o(t,l,r),l},this.deleteElements=function(e,t){for(var l=0;l<t.length;l+=1){for(var r=t[l],n=0;n<r.idxArr.length;n+=1){var i=r.idxArr[n];e[i].type="empty"}for(var a=0;a<e.length;a+=1)e[a].state="default"}}}])}(),function(){angular.module("app").factory("drFiledFactory",function(){var e=["square","circle","triangle"],t=["default","active","passive","note"],l=9;return{types:e,states:t,size:l}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiYW5ndWxhciIsIm1vZHVsZSIsInJ1biIsIiR0ZW1wbGF0ZUNhY2hlIiwicHV0IiwibWFpbkN0cmwiLCIkc2NvcGUiLCIkaHR0cCIsIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsIiR0aW1lb3V0IiwidGhpcyIsImNlbGxTdGF0ZSIsImluaXQiLCJjb250cm9sbGVyIiwicHJvdG90eXBlIiwiJGluamVjdCIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJkaXJlY3RpdmUiLCJkckNlbGxMaW5rIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCJsaW5rIiwicmVzdHJpY3QiLCJzY29wZSIsInRlbXBsYXRlIiwiZ2V0IiwiZHJDZWxsQ3RybCIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJ0eXBlIiwic3RhdGUiLCJ2YWx1ZSIsImRyRmllbGRMaW5rIiwiZHJGaWVsZEN0cmwiLCJjZWxsQ2xpY2siLCJzaXplIiwiY3R4IiwiZHJGaWVsZFNlcnZpY2UiLCJjZWxscyIsImNyZWF0ZU5ld0FyciIsImUiLCJjZWxsIiwiaWR4IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJhY3RpdmVDZWxsIiwiYWN0aXZlQ2VsbElkeCIsIm1hcmtDbG9zZXN0Q2VsbCIsInJlcGxhY2VFbGVtZW50cyIsInVuZGVmaW5lZCIsInNlcnZpY2UiLCJkckZpbGVkRmFjdG9yeSIsInJldHVyblJhbmRFbGVtZW50IiwiYXJyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmV0dXJuQW5vdGhlclR5cGUiLCJyZXBlYXRUeXBlcyIsIm5ld0FyciIsImNvcHkiLCJ0eXBlcyIsImoiLCJzcGxpY2UiLCJzZXRDb29yZHNUb0VsZW1lbnRzIiwiY29sIiwicm93IiwiY3JlYXRlRWxlbWVudCIsImNoZWNrSFJlcCIsImNoZWNrVlJlcCIsInB1c2giLCJpZCIsImNvbElkeCIsInJvd0lkeCIsImNvdW50UmVwZWF0SW5Sb3ciLCJyZXN1bHQiLCJjb3VudEluUm93IiwiY3VycmVudFR5cGUiLCJ0ZW1wQXJyIiwicyIsImlkeEFyciIsImNvdW50UmVwZWF0SW5Db2wiLCJjb3VudCIsImNvdW50SW5Db2wiLCJpZHgxIiwiaWR4MiIsIl90aGlzIiwiZWxlbTEiLCJlbGVtMiIsImNvcHlFbCIsImRlbExpbmVzIiwiY2hlY2tSb3dFbGVtZW50cyIsImRlbGV0ZUVsZW1lbnRzIiwiZGVsQXJyIiwibGluZSIsImRlbElkeCIsIl9qIiwiZmFjdG9yeSIsInN0YXRlcyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFvQ0EsU0FBU0EsaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBaURoSCxRQUFTSCxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxzQ0FuRmhILFdBQ0NDLFFBQVFDLE9BQU8sT0FBUSxZQUFhLGFBQWMsYUFBYyxpQkFJakVELFFBQVFDLE9BQU8sT0FBT0MsS0FBSyxpQkFBa0IsU0FBVUMsR0FDckRBLEVBQWVDLElBQUkscUJBQXNCLGdHQUN6Q0QsRUFBZUMsSUFBSSx1QkFBd0IsZ1ZBSTdDLFdBS0MsUUFBU0MsR0FBU0MsRUFBUUMsRUFBT0MsRUFBUUMsRUFBY0MsR0FDdERDLEtBQUtMLE9BQVNBLEVBQ2RLLEtBQUtKLE1BQVFBLEVBQ2JJLEtBQUtILE9BQVNBLEVBRWRHLEtBQUtDLFVBQVksU0FFakJELEtBQUtFLE9BVE5iLFFBQVFDLE9BQU8sT0FBT2EsV0FBVyxXQUFZVCxHQVk3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QixTQUFVdEMsR0FDakMsR0FBSXNCLE1BQ0F4QyxFQUFPZ0IsRUFBZWhCLElBSzFCLE9BSEF1QyxHQUFpQnJCLEVBQUtzQixFQUFReEMsR0FDOUI4QyxFQUFpQjVCLEVBQUtzQixFQUFReEMsR0FFdkJ3QyxHQU1SL0UsS0FBS2dHLGVBQWlCLFNBQVV2QyxFQUFLd0MsR0FDcEMsSUFBSyxHQUFJdkYsR0FBSSxFQUFHQSxFQUFJdUYsRUFBT3RGLE9BQVFELEdBQUssRUFBRyxDQUcxQyxJQUFLLEdBRkR3RixHQUFPRCxFQUFPdkYsR0FFVHdELEVBQUksRUFBR0EsRUFBSWdDLEVBQUtkLE9BQU96RSxPQUFRdUQsR0FBSyxFQUFHLENBQy9DLEdBQUlpQyxHQUFTRCxFQUFLZCxPQUFPbEIsRUFDekJULEdBQUkwQyxHQUFRbEUsS0FBTyxRQUdwQixJQUFLLEdBQUltRSxHQUFLLEVBQUdBLEVBQUszQyxFQUFJOUMsT0FBUXlGLEdBQU0sRUFDdkMzQyxFQUFJMkMsR0FBSWxFLE1BQVEsa0JBUXJCLFdBQ0M3QyxRQUFRQyxPQUFPLE9BQU8rRyxRQUFRLGlCQUFrQixXQUMvQyxHQUFJcEMsSUFBUyxTQUFVLFNBQVUsWUFFN0JxQyxHQUFVLFVBQVcsU0FBVSxVQUFXLFFBRTFDL0QsRUFBTyxDQUVYLFFBQ0MwQixNQUFPQSxFQUNQcUMsT0FBUUEsRUFDUi9ELEtBQU1BIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnbmdBbmltYXRlJywgJ25nTWF0ZXJpYWwnLCAnbmdNZXNzYWdlcycsICd1aS5yb3V0ZXInXSk7XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnYXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdkckNlbGwvZHJDZWxsLmh0bWwnLCAnPGRpdiBjbGFzcz1cImNlbGxcIiBuZy1jbGFzcz1cImMucmV0dXJuQ2VsbENsYXNzKClcIj5cXG5cXHQ8ZGl2IGNsYXNzPVwiY2VsbF9fZmlnXCI+PC9kaXY+XFxuPC9kaXY+XFxuJyk7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnZHJGaWVsZC9kckZpZWxkLmh0bWwnLCAnPHVsIGNsYXNzPVwiY2VsbC1saXN0XCI+XFxuXFx0PGxpIGNsYXNzPVwiY2VsbC1saXN0X19pdGVtXCJcXG5cXHRcXHRuZy1yZXBlYXQ9XCIoaWR4LCBjZWxsKSBpbiBjZi5jZWxscyB0cmFjayBieSBjZWxsLmlkXCJcXG5cXHRcXHRuZy1zdHlsZT1cIntcXCdsZWZ0XFwnOiBjZWxsLmNvbCo2MCArIFxcJ3B4XFwnLCBcXCd0b3BcXCc6IGNlbGwucm93KjYwICsgXFwncHhcXCd9XCJcXG5cXHRcXHRuZy1jbGljaz1cImNmLmNlbGxDTGljaygkZXZlbnQsIGNlbGwsIGlkeClcIj5cXG5cXG5cXHRcXHQ8ZHItY2VsbCB0eXBlPVwie3tjZWxsLnR5cGV9fVwiIHN0YXRlPVwie3tjZWxsLnN0YXRlfX1cIj48L2RyLWNlbGw+XFxuXFxuXFx0PC9saT5cXG48L3VsPicpO1xufV0pO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ21haW5DdHJsJywgbWFpbkN0cmwpO1xuXG5cdGZ1bmN0aW9uIG1haW5DdHJsKCRzY29wZSwgJGh0dHAsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCAkdGltZW91dCkge1xuXHRcdHRoaXMuJHNjb3BlID0gJHNjb3BlO1xuXHRcdHRoaXMuJGh0dHAgPSAkaHR0cDtcblx0XHR0aGlzLiRzdGF0ZSA9ICRzdGF0ZTtcblxuXHRcdHRoaXMuY2VsbFN0YXRlID0gJ3NxdWFyZSc7XG5cblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdG1haW5DdHJsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge307XG5cblx0bWFpbkN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJyRodHRwJywgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnJHRpbWVvdXQnXTtcbn0pKCk7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbihmdW5jdGlvbiAoKSB7XG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5kaXJlY3RpdmUoJ2RyQ2VsbCcsIFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcblx0XHRmdW5jdGlvbiBkckNlbGxMaW5rKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJHRpbWVvdXQpIHt9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0bGluazogZHJDZWxsTGluayxcblx0XHRcdHJlc3RyaWN0OiAnQUVDJyxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdHRlbXBsYXRlOiAkdGVtcGxhdGVDYWNoZS5nZXQoJ2RyQ2VsbC9kckNlbGwuaHRtbCcpLFxuXHRcdFx0Y29udHJvbGxlcjogZHJDZWxsQ3RybCxcblx0XHRcdGNvbnRyb2xsZXJBczogJ2MnLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjoge1xuXHRcdFx0XHR0eXBlOiAnQD8nLFxuXHRcdFx0XHRzdGF0ZTogJ0A/J1xuXHRcdFx0fVxuXHRcdH07XG5cdH1dKTtcblxuXHR2YXIgZHJDZWxsQ3RybCA9IGZ1bmN0aW9uICgpIHtcblx0XHRmdW5jdGlvbiBkckNlbGxDdHJsKCRzY29wZSwgJHRpbWVvdXQpIHtcblx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBkckNlbGxDdHJsKTtcblx0XHR9XG5cblx0XHQvKipcbiAgICog0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0L3QsCDQstGM0Y7RhdC1LCDQstC+0LfQstGA0LDRidCw0LXRgiBjc3Mt0LrQu9Cw0YHRgdGLINC00LvRjyDRgtC40L/QsCDQuCDRgdC+0YHRgtC+0Y/QvdC40Y8g0Y/Rh9C10LnQutC4XG4gICAqL1xuXG5cblx0XHRfY3JlYXRlQ2xhc3MoZHJDZWxsQ3RybCwgW3tcblx0XHRcdGtleTogJ3JldHVybkNlbGxDbGFzcycsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gcmV0dXJuQ2VsbENsYXNzKCkge1xuXHRcdFx0XHR2YXIgdHlwZSA9ICdjZWxsX3R5cGUtJyArICh0aGlzLnR5cGUgfHwgJ3NxdWFyZScpO1xuXHRcdFx0XHR2YXIgc3RhdGUgPSAnY2VsbF9zdGF0ZS0nICsgKHRoaXMuc3RhdGUgfHwgJ2RlZmF1bHQnKTtcblxuXHRcdFx0XHRyZXR1cm4gW3R5cGUsIHN0YXRlXTtcblx0XHRcdH1cblx0XHR9XSk7XG5cblx0XHRyZXR1cm4gZHJDZWxsQ3RybDtcblx0fSgpO1xuXG5cdGRyQ2VsbEN0cmwuJGluamVjdCA9IFsnJHNjb3BlJywgJyR0aW1lb3V0J107XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4oZnVuY3Rpb24gKCkge1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuZGlyZWN0aXZlKCdkckZpZWxkJywgWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uICgkdGVtcGxhdGVDYWNoZSkge1xuXHRcdGZ1bmN0aW9uIGRyRmllbGRMaW5rKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJHRpbWVvdXQpIHt9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0bGluazogZHJGaWVsZExpbmssXG5cdFx0XHRyZXN0cmljdDogJ0FFQycsXG5cdFx0XHRzY29wZToge30sXG5cdFx0XHR0ZW1wbGF0ZTogJHRlbXBsYXRlQ2FjaGUuZ2V0KCdkckZpZWxkL2RyRmllbGQuaHRtbCcpLFxuXHRcdFx0Y29udHJvbGxlcjogZHJGaWVsZEN0cmwsXG5cdFx0XHRjb250cm9sbGVyQXM6ICdjZicsXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB7XG5cdFx0XHRcdGNlbGxDbGljazogJz0/Jyxcblx0XHRcdFx0c2l6ZTogJz0/Jyxcblx0XHRcdFx0Y3R4OiAnPT8nXG5cdFx0XHR9XG5cdFx0fTtcblx0fV0pO1xuXG5cdHZhciBkckZpZWxkQ3RybCA9IGZ1bmN0aW9uICgpIHtcblx0XHRmdW5jdGlvbiBkckZpZWxkQ3RybChkckZpZWxkU2VydmljZSwgJHNjb3BlLCAkdGltZW91dCkge1xuXHRcdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIGRyRmllbGRDdHJsKTtcblxuXHRcdFx0dGhpcy5kckZpZWxkU2VydmljZSA9IGRyRmllbGRTZXJ2aWNlO1xuXHRcdFx0aWYgKHRoaXMuc2l6ZSkgdGhpcy5kckZpZWxkU2VydmljZS5zaXplID0gdGhpcy5zaXplO1xuXHRcdFx0dGhpcy4kc2NvcGUgPSAkc2NvcGU7XG5cdFx0XHR0aGlzLiR0aW1lb3V0ID0gJHRpbWVvdXQ7XG5cblx0XHRcdHRoaXMuaW5pdCgpO1xuXHRcdH1cblxuXHRcdC8qKlxuICAgKiDQn9GA0Lgg0LjQvdGG0LjQsNC70LjQt9Cw0YbQuNC4INGB0L7Qt9C00LDQtdC8INC80LDRgdGB0LjQslxuICAgKi9cblxuXG5cdFx0X2NyZWF0ZUNsYXNzKGRyRmllbGRDdHJsLCBbe1xuXHRcdFx0a2V5OiAnaW5pdCcsXG5cdFx0XHR2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcblx0XHRcdFx0dGhpcy5jZWxscyA9IHRoaXMuZHJGaWVsZFNlcnZpY2UuY3JlYXRlTmV3QXJyKHRoaXMuc2l6ZSk7XG5cdFx0XHR9XG5cblx0XHRcdC8qKlxuICAgICog0JrQu9C40Log0L/QviDRj9GH0LXQudC60LVcbiAgICAqID09INGB0L7QsdGL0YLQuNC1LCDRj9GH0LXQudC60LAsINC40L3QtNC10LrRgSDQsiDQvNCw0YHRgdC40LLQtSA9PVxuICAgICovXG5cblx0XHR9LCB7XG5cdFx0XHRrZXk6ICdjZWxsQ0xpY2snLFxuXHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGNlbGxDTGljayhlLCBjZWxsLCBpZHgpIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0XHRcdGlmIChjZWxsLnN0YXRlID09PSAnZGVmYXVsdCcpIHtcblx0XHRcdFx0XHQvLyDQmtC70LjQuiDQv9C+INGP0YfQtdC50LrQtSDRgSDQtNC10YTQvtC70YLQvdGL0Lwg0YHRgtCw0YLRg9GB0L7QvC4g0JTQtdC70LDQtdC8INC10ZEg0LDQutGC0LjQstC90L7QuSDQuCDQstGL0LTQtdC70Y/QtdC8INC/0LDRgdGB0LjQstC+0Lwg0LHQu9C40LbQsNC50YjQuNC1INGP0YfQtdC50LrQuFxuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jZWxscy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRcdFx0dGhpcy5jZWxsc1tpXS5zdGF0ZSA9ICdkZWZhdWx0Jztcblx0XHRcdFx0XHR9dGhpcy5hY3RpdmVDZWxsID0gY2VsbDtcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZUNlbGwuc3RhdGUgPSAnYWN0aXZlJztcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZUNlbGxJZHggPSBpZHg7XG5cdFx0XHRcdFx0dGhpcy5kckZpZWxkU2VydmljZS5tYXJrQ2xvc2VzdENlbGwodGhpcy5jZWxscywgdGhpcy5zaXplLCBpZHgsICdwYXNzaXZlJyk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2VsbC5zdGF0ZSA9PT0gJ3Bhc3NpdmUnKSB7XG5cdFx0XHRcdFx0Ly8g0JrQu9C40Log0L/QviDRj9GH0LXQudC60LUg0YEg0L/QsNGB0YHQuNCy0L3Ri9C8INGB0YLQsNGC0YPRgdC+0Lxcblx0XHRcdFx0XHR0aGlzLmRyRmllbGRTZXJ2aWNlLnJlcGxhY2VFbGVtZW50cyh0aGlzLmNlbGxzLCB0aGlzLmFjdGl2ZUNlbGxJZHgsIGlkeCk7XG5cdFx0XHRcdFx0dGhpcy4kdGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQvLyB0aGlzLmRyRmllbGRTZXJ2aWNlXG5cdFx0XHRcdFx0XHQvLyBUT0RPOiDQv9C+INGC0LDQudC80LDRg9GC0YMg0YDQtdCw0LvQuNC30L7QstCw0YLRjCDRgdC70YPQtNC10Y7RidC10LUg0L/QvtCy0LXQtNC10L3QuNC1OiDQv9C10YDQtdGJ0LXQvdC90YvQuSDQsNC60YLQuNCy0L3Ri9C5INGN0LvQtdC80LXQvdGCINC+0YHRgtCw0ZHRgtGB0Y8g0LDQutGC0LjQstC90YvQvCDQvdCwINC90L7QstC+0Lwg0LzQtdGB0YLQtVxuXHRcdFx0XHRcdFx0Ly8gVE9ETzog0LLRi9C00LXQu9C40YLRjCDQvdC+0LLRi9C1INC/0LDRgdGB0LjQstC90YvQtSDRjdC70LXQvNC10L3RgtGLXG5cdFx0XHRcdFx0fSwgMjAwKTtcblx0XHRcdFx0fSBlbHNlIGlmIChjZWxsLnN0YXRlID09PSAnYWN0aXZlJykge1xuXHRcdFx0XHRcdC8vINCa0LvQuNC6INC/0L4g0Y/Rh9C10LnQutC1INGBINCw0LrRgtC40LLQvdGL0Lwg0YHRgtCw0YLRg9GB0L7QvC4g0KHQvdC40LzQsNC10Lwg0LDQutGC0LjQstC90L7RgdGC0Ywg0YEg0L3QtdGRINC4INCx0LvQuNC20LDQudGI0LjRhVxuXHRcdFx0XHRcdGNlbGwuc3RhdGUgPSAnZGVmYXVsdCc7XG5cdFx0XHRcdFx0dGhpcy5hY3RpdmVDZWxsID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdHRoaXMuYWN0aXZlQ2VsbElkeCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHR0aGlzLmRyRmllbGRTZXJ2aWNlLm1hcmtDbG9zZXN0Q2VsbCh0aGlzLmNlbGxzLCB0aGlzLnNpemUsIGlkeCwgJ2RlZmF1bHQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1dKTtcblxuXHRcdHJldHVybiBkckZpZWxkQ3RybDtcblx0fSgpO1xuXG5cdGRyRmllbGRDdHJsLiRpbmplY3QgPSBbJ2RyRmllbGRTZXJ2aWNlJywgJyRzY29wZScsICckdGltZW91dCddO1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpLnNlcnZpY2UoJ2RyRmllbGRTZXJ2aWNlJywgWydkckZpbGVkRmFjdG9yeScsICckdGltZW91dCcsIGZ1bmN0aW9uIChkckZpbGVkRmFjdG9yeSwgJHRpbWVvdXQpIHtcblx0XHQvKipcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBwcml2YXRlIG1ldGhvZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICovXG5cdFx0LyoqXG4gICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdC8INGA0LDQvdC00L7QvNC90YvQuSDRjdC70LXQvNC10L3RgiDQvNCw0YHRgdC40LLQsFxuICAgKi9cblx0XHRmdW5jdGlvbiByZXR1cm5SYW5kRWxlbWVudChhcnIpIHtcblx0XHRcdHZhciBpZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnIubGVuZ3RoKTtcblx0XHRcdHJldHVybiBhcnJbaWR4XTtcblx0XHR9XG5cblx0XHQvKipcbiAgICog0JLQvtC30LLRgNCw0YnQsNC10Lwg0YDQsNC90LTQvtC80L3Ri9C5INGN0LvQtdC80LXQvdGCINC80LDRgdGB0LjQstCwLCDQuNGB0LrQu9GO0YfQsNGPINC/0LXRgNC10LTQsNC90L3Ri9C5INCyINGE0YPQvdC60YbQuNGOXG4gICAqL1xuXHRcdGZ1bmN0aW9uIHJldHVybkFub3RoZXJUeXBlKHJlcGVhdFR5cGVzKSB7XG5cdFx0XHR2YXIgbmV3QXJyID0gYW5ndWxhci5jb3B5KGRyRmlsZWRGYWN0b3J5LnR5cGVzKTtcblxuXHRcdFx0bmV4dDogZm9yICh2YXIgaSA9IDA7IGkgPCByZXBlYXRUeXBlcy5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IG5ld0Fyci5sZW5ndGg7IGogKz0gMSkge1xuXHRcdFx0XHRcdGlmIChyZXBlYXRUeXBlc1tpXSA9PT0gbmV3QXJyW2pdKSBuZXdBcnIuc3BsaWNlKGosIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXR1cm5SYW5kRWxlbWVudChuZXdBcnIpO1xuXHRcdH1cblxuXHRcdC8qKlxuICAgKiDQpNGD0L3QutGG0LjRjyDQv9GA0L7RgdGC0LDQstC70Y/QtdGCINGN0LvQtdC80LXQvdGC0YvQvCDQvNCw0YHRgdC40LLQsCDQutC+0L7RgNC00LjQvdCw0YLRiyAo0L/QvtC70Y8gXCJjb2xcIiwgXCJyb3dcIikg0LIg0LfQsNCy0LjRgdC40LzQvtGB0YLQuCDQvtGCXG4gICAqINCy0YLQvtGA0L7Qs9C+INC/0LDRgNCw0LzQtdGC0YDQsCBzaXplICjRiNC40YDQuNC90LAg0LzQsNGB0YHQuNCy0LApXG4gICAqL1xuXHRcdGZ1bmN0aW9uIHNldENvb3Jkc1RvRWxlbWVudHMoYXJyLCBzaXplKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRhcnJbaV0uY29sID0gaSAlIHNpemU7XG5cdFx0XHRcdGFycltpXS5yb3cgPSBNYXRoLmZsb29yKGkgLyBzaXplKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvKipcbiAgICog0KTRg9C90LrRhtC40Y8g0L/RgNC40L3QuNC80LDQtdGCINC80LDRgdGB0LjQsiwg0LIg0LrQvtGC0L7RgNGL0Lkg0LTQvtCx0LDQstC70Y/QtdGCINC90L7QstGL0Lkg0Y3Qu9C10LzQtdC90YIuXG4gICAqINCf0YDQuCDQtNC+0LHQsNCy0LvQtdC90LjQuCDQstGL0L/QvtC70L3Rj9C10YIg0LTQstC1INC/0YDQvtCy0LXRgNC60Lg6XG4gICAqIC0g0LXRgdC70Lgg0YLQuNC/0Ysg0LTQstGD0YUg0L/RgNC10LTRi9C00YPRidC40YUg0L7QsdGK0LXQutGCINGA0LDQstC90Ysg0YLQtdC60YPRidC10LzRgyDRgdCz0LXQvdC10YDQuNGA0L7QstCw0L3QvdC+0LzRgyDRgtC40L/Rgywg0YLQviDQs9C10L3QtdGA0LjRgNGD0LXQvCDQvdC+0LLRi9C5XG4gICAqIC0g0LXRgdC70Lgg0YLQuNC/0Ysg0LTQstGD0YUg0L7QsdGK0LXQutGC0L7QsiDQvdCw0LQg0YLQtdC60YPQt9C40Lwg0YDQsNCy0L3RiyDRgtC10LrRg9GJ0LXQvNGDINGB0LPQtdC90LXRgNC40YDQvtCy0LDQvdC90L7QvNGDINGC0LjQv9GDLCDRgtC+INCz0LXQvdC10YDQuNGA0YPQtdC8INC90L7QstGL0LlcbiAgICogQHBhcmFtIGFyclxuICAgKi9cblx0XHRmdW5jdGlvbiBjcmVhdGVFbGVtZW50KGFyciwgc2l6ZSwgaWR4KSB7XG5cdFx0XHR2YXIgdHlwZSA9IHJldHVyblJhbmRFbGVtZW50KGRyRmlsZWRGYWN0b3J5LnR5cGVzKTtcblxuXHRcdFx0dmFyIHJlcGVhdFR5cGVzID0gW107XG5cblx0XHRcdC8vINCf0YDQvtCy0LXRgNC60Lgg0L3QsCDQs9C+0YDQuNC30L7QvdGC0LDQu9GM0L3Ri9C1INC4INCy0LXRgNGC0LjQutCw0LvRjNC90YvQtSDRgdC+0LLQv9Cw0LTQtdC90LjRjyDQv9GA0Lgg0LPQtdC90LXRgNCw0YbQuNC4XG5cdFx0XHRjaGVja0hSZXAoYXJyLCBzaXplLCByZXBlYXRUeXBlcyk7XG5cdFx0XHRjaGVja1ZSZXAoYXJyLCBzaXplLCByZXBlYXRUeXBlcyk7XG5cblx0XHRcdGlmIChyZXBlYXRUeXBlcy5sZW5ndGgpIHR5cGUgPSByZXR1cm5Bbm90aGVyVHlwZShyZXBlYXRUeXBlcyk7XG5cblx0XHRcdGFyci5wdXNoKHtcblx0XHRcdFx0aWQ6IGlkeCxcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0c3RhdGU6ICdkZWZhdWx0J1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0LyoqXG4gICAqINCf0YDQvtCy0LXRgNC60LAg0L3QsCDQs9C+0YDQuNC30L7QvdGC0LDQu9GM0L3QvtC1INC/0L7QstGC0L7RgNC10L3QuNC1XG4gICAqL1xuXHRcdGZ1bmN0aW9uIGNoZWNrSFJlcChhcnIsIHNpemUsIHJlcGVhdFR5cGVzKSB7XG5cdFx0XHR2YXIgY29sSWR4ID0gYXJyLmxlbmd0aCAlIHNpemU7XG5cdFx0XHRpZiAoY29sSWR4ID4gMSkge1xuXHRcdFx0XHRpZiAoYXJyW2Fyci5sZW5ndGggLSAyXS50eXBlID09PSBhcnJbYXJyLmxlbmd0aCAtIDFdLnR5cGUpIHtcblx0XHRcdFx0XHRyZXBlYXRUeXBlcy5wdXNoKGFyclthcnIubGVuZ3RoIC0gMV0udHlwZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvKipcbiAgICog0J/RgNC+0LLQtdGA0LrQsCDQvdCwINCy0LXRgNGC0LjQutCw0LvRjNC90L7QtSDQv9C+0LLRgtC+0YDQtdC90LjQtVxuICAgKi9cblx0XHRmdW5jdGlvbiBjaGVja1ZSZXAoYXJyLCBzaXplLCByZXBlYXRUeXBlcykge1xuXHRcdFx0dmFyIHJvd0lkeCA9IE1hdGguZmxvb3IoYXJyLmxlbmd0aCAvIHNpemUpO1xuXHRcdFx0aWYgKHJvd0lkeCA+IDEpIHtcblx0XHRcdFx0aWYgKGFyclthcnIubGVuZ3RoIC0gc2l6ZV0udHlwZSA9PT0gYXJyW2Fyci5sZW5ndGggLSBzaXplICogMl0udHlwZSkge1xuXHRcdFx0XHRcdHJlcGVhdFR5cGVzLnB1c2goYXJyW2Fyci5sZW5ndGggLSBzaXplXS50eXBlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxuICAgKiDQpNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDRj9C10YIg0L3QsCDQs9C+0YDQuNC30L7QvdGC0LDQu9GM0L3Ri9C1INGB0L7QstC/0LDQtNC10L3QuNGPXG4gICAqL1xuXHRcdGZ1bmN0aW9uIGNvdW50UmVwZWF0SW5Sb3coYXJyLCByZXN1bHQsIHNpemUpIHtcblx0XHRcdG5leHQ6IGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRcdHZhciBjb2xJZHggPSBpICUgc2l6ZTtcblx0XHRcdFx0dmFyIGNvdW50SW5Sb3cgPSAxO1xuXHRcdFx0XHR2YXIgY3VycmVudFR5cGUgPSBhcnJbaV0udHlwZTtcblxuXHRcdFx0XHRmb3IgKHZhciBqID0gMTsgaiA8IHNpemUgLSBjb2xJZHg7IGogKz0gMSkge1xuXHRcdFx0XHRcdGlmIChhcnJbaSArIGpdLnR5cGUgIT09IGN1cnJlbnRUeXBlKSBicmVhaztcblx0XHRcdFx0XHRjb3VudEluUm93Kys7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGNvdW50SW5Sb3cgPiAyKSB7XG5cdFx0XHRcdFx0dmFyIHRlbXBBcnIgPSBbXTtcblx0XHRcdFx0XHRmb3IgKHZhciBzID0gMDsgcyA8IGNvdW50SW5Sb3c7IHMgKz0gMSkge1xuXHRcdFx0XHRcdFx0dGVtcEFyci5wdXNoKGkgKyBzKTtcblx0XHRcdFx0XHR9cmVzdWx0LnB1c2goe1xuXHRcdFx0XHRcdFx0bGVuZ3RoOiBjb3VudEluUm93LFxuXHRcdFx0XHRcdFx0dHlwZTogY3VycmVudFR5cGUsXG5cdFx0XHRcdFx0XHRpZHhBcnI6IHRlbXBBcnJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpICs9IGNvdW50SW5Sb3cgLSAxO1xuXHRcdFx0XHRcdGNvdW50SW5Sb3cgPSAwO1xuXHRcdFx0XHRcdGNvbnRpbnVlIG5leHQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y291bnRJblJvdyA9IDA7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXG4gICAqINCk0YPQvdC60YbQuNGPINC/0YDQvtCy0LXRgNGP0LXRgiDQvdCwINCy0LXRgNGC0LjQutCw0LvRjNC90YvQtSDRgdC+0LLQv9Cw0LTQtdC90LjRj1xuICAgKi9cblx0XHRmdW5jdGlvbiBjb3VudFJlcGVhdEluQ29sKGFyciwgcmVzdWx0LCBzaXplKSB7XG5cdFx0XHRuZXh0OiBmb3IgKHZhciBjb3VudCA9IDAsIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRcdGlmIChpID4gMCAmJiBpICUgc2l6ZSA9PT0gMCkgY291bnQrKztcblx0XHRcdFx0dmFyIHJvd0lkeCA9IGkgJSBzaXplICogc2l6ZSArIGNvdW50O1xuXHRcdFx0XHR2YXIgY291bnRJbkNvbCA9IDE7XG5cdFx0XHRcdHZhciBjdXJyZW50VHlwZSA9IGFycltyb3dJZHhdLnR5cGU7XG5cblx0XHRcdFx0Zm9yICh2YXIgaiA9IDE7IGogPCBzaXplIC0gcm93SWR4IC8gc2l6ZTsgaiArPSAxKSB7XG5cdFx0XHRcdFx0aWYgKGFycltyb3dJZHggKyBzaXplICogal0udHlwZSAhPT0gY3VycmVudFR5cGUpIGJyZWFrO1xuXHRcdFx0XHRcdGNvdW50SW5Db2wrKztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoY291bnRJbkNvbCA+IDIpIHtcblx0XHRcdFx0XHR2YXIgdGVtcEFyciA9IFtdO1xuXHRcdFx0XHRcdGZvciAodmFyIHMgPSAwOyBzIDwgY291bnRJbkNvbDsgcyArPSAxKSB7XG5cdFx0XHRcdFx0XHR0ZW1wQXJyLnB1c2gocm93SWR4ICsgc2l6ZSAqIHMpO1xuXHRcdFx0XHRcdH1yZXN1bHQucHVzaCh7XG5cdFx0XHRcdFx0XHRsZW5ndGg6IGNvdW50SW5Db2wsXG5cdFx0XHRcdFx0XHR0eXBlOiBjdXJyZW50VHlwZSxcblx0XHRcdFx0XHRcdGlkeEFycjogdGVtcEFyclxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGkgKz0gY291bnRJbkNvbCAtIDE7XG5cdFx0XHRcdFx0Y291bnRJbkNvbCA9IDA7XG5cdFx0XHRcdFx0Y29udGludWUgbmV4dDtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb3VudEluQ29sID0gMDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvKipcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBwdWJsaWMgbWV0aG9kcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgKi9cblxuXHRcdC8qKlxuICAgKiDQnNC10YLQvtC0INGB0LXRgNCy0LjRgdCwINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC90L7QstGL0Lkg0LzQsNGB0YHQuNCyINC00LvQuNC90L7QuSBzaXplKnNpemVcbiAgICovXG5cdFx0dGhpcy5jcmVhdGVOZXdBcnIgPSBmdW5jdGlvbiAoc2l6ZSkge1xuXHRcdFx0dmFyIGFyciA9IFtdO1xuXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHNpemUgKiBzaXplOyBpKyspIHtcblx0XHRcdFx0Y3JlYXRlRWxlbWVudChhcnIsIHNpemUsIGkpO1xuXHRcdFx0fXNldENvb3Jkc1RvRWxlbWVudHMoYXJyLCBzaXplKTtcblxuXHRcdFx0cmV0dXJuIGFycjtcblx0XHR9O1xuXG5cdFx0LyoqXG4gICAqINCX0LDQtNCw0LXQvCDRgdC+0YHRgtC+0Y/QvdC40LUg0LHQu9C40LbQsNC50YjQuNC8INGN0LvQtdC80LXQvdGC0LDQvCDQvtGCINCy0YvQtNC10LvQtdC90L3QvtCz0L5cbiAgICovXG5cdFx0dGhpcy5tYXJrQ2xvc2VzdENlbGwgPSBmdW5jdGlvbiAoYXJyLCBzaXplLCBpZHgsIHN0YXRlKSB7XG5cdFx0XHRpZiAoYXJyW2lkeCAtIHNpemVdKSBhcnJbaWR4IC0gc2l6ZV0uc3RhdGUgPSBzdGF0ZTtcblx0XHRcdGlmIChhcnJbaWR4ICsgc2l6ZV0pIGFycltpZHggKyBzaXplXS5zdGF0ZSA9IHN0YXRlO1xuXHRcdFx0aWYgKGFycltpZHggLSAxXSkgYXJyW2lkeCAtIDFdLnN0YXRlID0gc3RhdGU7XG5cdFx0XHRpZiAoYXJyW2lkeCArIDFdKSBhcnJbaWR4ICsgMV0uc3RhdGUgPSBzdGF0ZTtcblx0XHR9O1xuXG5cdFx0LyoqXG4gICAqINCc0LXQvdGP0LXQvCDQvNC10YHRgtCw0LzQuCDRj9GH0LXQudC60LguINCQ0LvQs9C+0YDQuNGC0Lw6XG4gICAqIC0g0YHQvdCw0YfQsNC70LAg0LzQtdC90Y/QtdC8INC/0LDRgNCw0LzQtdC90YLRgNGLIGNvbC9yb3cgKNC00LvRjyDQsNC90LjQvNCw0YbQuCkuXG4gICAqIC0g0L/QvtGB0LvQtSDQv9C+INGC0LDQudC80LDRg9GC0YMg0LzQtdC90Y/QtdC8INC00LDQvdC90YvQtSDQvtCx0YrQtdC60YLQvtCyINCyINGB0LDQvNC+0Lwg0LzQsNGB0YHQuNCy0LUgKNGE0LjQs9GD0YDRgylcbiAgICovXG5cdFx0dGhpcy5yZXBsYWNlRWxlbWVudHMgPSBmdW5jdGlvbiAoYXJyLCBpZHgxLCBpZHgyKSB7XG5cdFx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0XHR2YXIgZWxlbTEgPSB7IGNvbDogYXJyW2lkeDFdLmNvbCwgcm93OiBhcnJbaWR4MV0ucm93LCB0eXBlOiBhcnJbaWR4MV0udHlwZSwgc3RhdGU6IGFycltpZHgxXS5zdGF0ZSB9O1xuXHRcdFx0dmFyIGVsZW0yID0geyBjb2w6IGFycltpZHgyXS5jb2wsIHJvdzogYXJyW2lkeDJdLnJvdywgdHlwZTogYXJyW2lkeDJdLnR5cGUsIHN0YXRlOiBhcnJbaWR4Ml0uc3RhdGUgfTtcblxuXHRcdFx0YXJyW2lkeDFdLmNvbCA9IGVsZW0yLmNvbDtcblx0XHRcdGFycltpZHgxXS5yb3cgPSBlbGVtMi5yb3c7XG5cblx0XHRcdGFycltpZHgyXS5jb2wgPSBlbGVtMS5jb2w7XG5cdFx0XHRhcnJbaWR4Ml0ucm93ID0gZWxlbTEucm93O1xuXG5cdFx0XHQvKipcbiAgICAqINCS0YDQtdC80Y8g0YLQsNC50LzQsNGD0YLQsCAtINCy0YDQtdC80Y8g0LDQvdC40LzQsNGG0LjQuCDQtNCy0LjQttC10L3QuNGPINGN0LvQtdC80LXQvdGC0L7QsiDQstC+INCy0YDQtdC80Y8g0YHQvNC10L3RiyDQv9C+0LfQuNGG0LjQuVxuICAgICovXG5cdFx0XHQkdGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBjb3B5RWwgPSBhbmd1bGFyLmNvcHkoYXJyW2lkeDFdKTtcblx0XHRcdFx0YXJyW2lkeDFdID0gYXJyW2lkeDJdO1xuXHRcdFx0XHRhcnJbaWR4Ml0gPSBjb3B5RWw7XG5cblx0XHRcdFx0dmFyIGRlbExpbmVzID0gX3RoaXMuY2hlY2tSb3dFbGVtZW50cyhhcnIpO1xuXG5cdFx0XHRcdF90aGlzLmRlbGV0ZUVsZW1lbnRzKGFyciwgZGVsTGluZXMpO1xuXHRcdFx0fSwgMjAwKTtcblx0XHR9O1xuXG5cdFx0LyoqXG4gICAqINCf0YDQvtCy0LXRgNGP0LXQvCDQvdCwINC+0LHRitC10LrRgtGLINC+0LTQuNC90LDQutC+0LLQvtCz0L4g0YLQuNC/0LAg0LIg0YHRgtGA0L7QutCw0YVcbiAgICovXG5cdFx0dGhpcy5jaGVja1Jvd0VsZW1lbnRzID0gZnVuY3Rpb24gKGFycikge1xuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdFx0dmFyIHNpemUgPSBkckZpbGVkRmFjdG9yeS5zaXplO1xuXG5cdFx0XHRjb3VudFJlcGVhdEluUm93KGFyciwgcmVzdWx0LCBzaXplKTtcblx0XHRcdGNvdW50UmVwZWF0SW5Db2woYXJyLCByZXN1bHQsIHNpemUpO1xuXG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH07XG5cblx0XHQvKipcbiAgICog0KPQtNCw0LvRj9C10Lwg0L7QsdGK0LXQutGC0Ysg0L7QtNC40L3QsNC60L7QstC+0LPQviDRgtC40L/QsCwg0LXRgdC70Lgg0LjRhSDQsdC+0LvRjNGI0LUg0YLRgNGR0YUg0LIg0YHRgtGA0L7QutC1INC40LvQuCDQsiDQutC+0LvQvtC90LrQtVxuICAgKi9cblx0XHR0aGlzLmRlbGV0ZUVsZW1lbnRzID0gZnVuY3Rpb24gKGFyciwgZGVsQXJyKSB7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRlbEFyci5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHR2YXIgbGluZSA9IGRlbEFycltpXTtcblxuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGxpbmUuaWR4QXJyLmxlbmd0aDsgaiArPSAxKSB7XG5cdFx0XHRcdFx0dmFyIGRlbElkeCA9IGxpbmUuaWR4QXJyW2pdO1xuXHRcdFx0XHRcdGFycltkZWxJZHhdLnR5cGUgPSAnZW1wdHknO1xuXHRcdFx0XHRcdC8vIGRlbGV0ZSBhcnJbZGVsSWR4XTtcblx0XHRcdFx0fVxuXHRcdFx0XHRmb3IgKHZhciBfaiA9IDA7IF9qIDwgYXJyLmxlbmd0aDsgX2ogKz0gMSkge1xuXHRcdFx0XHRcdGFycltfal0uc3RhdGUgPSAnZGVmYXVsdCc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XSk7XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnZHJGaWxlZEZhY3RvcnknLCBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHR5cGVzID0gWydzcXVhcmUnLCAnY2lyY2xlJywgJ3RyaWFuZ2xlJ107XG5cblx0XHR2YXIgc3RhdGVzID0gWydkZWZhdWx0JywgJ2FjdGl2ZScsICdwYXNzaXZlJywgJ25vdGUnXTtcblxuXHRcdHZhciBzaXplID0gOTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHR0eXBlczogdHlwZXMsXG5cdFx0XHRzdGF0ZXM6IHN0YXRlcyxcblx0XHRcdHNpemU6IHNpemVcblx0XHR9O1xuXHR9KTtcbn0pKCk7Il19
